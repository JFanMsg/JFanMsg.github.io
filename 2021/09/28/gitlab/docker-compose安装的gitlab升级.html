<hr>
<p>title: docker-compose安装的gitlab升级<br>top: false<br>cover: false<br>toc: true<br>mathjax: true<br>date: 2021-09-15 18:20:32<br>password:<br>summary:<br>tags:</p>
<ul>
<li>gitlab<br>categories:</li>
<li>gitlab</li>
</ul>
<hr>
<h1 id="升级路线图"><a href="#升级路线图" class="headerlink" title="升级路线图"></a>升级路线图</h1><p>我安装的是12版本，要升级到14版本</p>
<p>官方路径图：<a href="https://docs.gitlab.com/ee/update/index.html#upgrade-paths">https://docs.gitlab.com/ee/update/index.html#upgrade-paths</a></p>
<p><code>8.11.Z</code>-&gt; <code>8.12.0</code>-&gt; <code>8.17.7</code>-&gt; <code>9.5.10</code>-&gt; <code>10.8.7</code>-&gt; <a href="https://docs.gitlab.com/ee/update/index.html#1200"><code>11.11.8</code></a>-&gt; <code>12.0.12</code>-&gt; <a href="https://docs.gitlab.com/ee/update/index.html#1210"><code>12.1.17</code></a>-&gt; <code>12.10.14</code>-&gt; <code>13.0.14</code>-&gt; <a href="https://docs.gitlab.com/ee/update/index.html#1310"><code>13.1.11</code></a>-&gt; <a href="https://docs.gitlab.com/ee/update/index.html#1388"><code>13.8.8</code></a>-&gt;<a href="https://about.gitlab.com/releases/categories/releases/">最新<code>13.12.Z</code></a>-&gt;<a href="https://docs.gitlab.com/ee/update/index.html#1400">最新<code>14.0.Z</code></a>-&gt;<a href="https://about.gitlab.com/releases/categories/releases/">最新<code>14.Y.Z</code></a></p>
<table>
<thead>
<tr>
<th align="left">目标版本</th>
<th align="left">你的版本</th>
<th align="left">支持的升级路径</th>
<th align="left">笔记</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>14.1.2</code></td>
<td align="left"><code>13.9.2</code></td>
<td align="left"><code>13.9.2</code>-&gt; <code>13.12.9</code>-&gt; <code>14.0.7</code>-&gt;<code>14.1.2</code></td>
<td align="left">需要两个中间版本：<code>13.12</code>和<code>14.0</code>，然后<code>14.1</code>。</td>
</tr>
<tr>
<td align="left"><code>13.12.10</code></td>
<td align="left"><code>12.9.2</code></td>
<td align="left"><code>12.9.2</code>-&gt; <code>12.10.14</code>-&gt; <code>13.0.14</code>-&gt; <code>13.1.11</code>-&gt; <code>13.8.8</code>-&gt;<code>13.12.10</code></td>
<td align="left">需要四个中间版本：<code>12.10</code>、<code>13.0</code>、<code>13.1</code>和<code>13.8.8</code>，然后<code>13.12.10</code>。</td>
</tr>
<tr>
<td align="left"><code>13.2.10</code></td>
<td align="left"><code>11.5.0</code></td>
<td align="left"><code>11.5.0</code>-&gt; <code>11.11.8</code>-&gt; <code>12.0.12</code>-&gt; <code>12.1.17</code>-&gt; <code>12.10.14</code>-&gt; <code>13.0.14</code>-&gt; <code>13.1.11</code>-&gt;<code>13.2.10</code></td>
<td align="left">需要六个中间版本：<code>11.11</code>、<code>12.0</code>、<code>12.1</code>、<code>12.10</code>、<code>13.0</code>和<code>13.1</code>，然后<code>13.2.10</code>。</td>
</tr>
<tr>
<td align="left"><code>12.10.14</code></td>
<td align="left"><code>11.3.4</code></td>
<td align="left"><code>11.3.4</code>-&gt; <code>11.11.8</code>-&gt; <code>12.0.12</code>-&gt; <code>12.1.17</code>-&gt;<code>12.10.14</code></td>
<td align="left">需要三个中间版本：<code>11.11</code>,<code>12.0</code>和<code>12.1</code>, 然后<code>12.10.14</code>。</td>
</tr>
<tr>
<td align="left"><code>12.9.5</code></td>
<td align="left"><code>10.4.5</code></td>
<td align="left"><code>10.4.5</code>-&gt; <code>10.8.7</code>-&gt; <code>11.11.8</code>-&gt; <code>12.0.12</code>-&gt; <code>12.1.17</code>-&gt;<code>12.9.5</code></td>
<td align="left">需要四个中间版本：<code>10.8</code>、<code>11.11</code>、<code>12.0</code>和<code>12.1</code>，然后<code>12.9.5</code>。</td>
</tr>
<tr>
<td align="left"><code>12.2.5</code></td>
<td align="left"><code>9.2.6</code></td>
<td align="left"><code>9.2.6</code>-&gt; <code>9.5.10</code>-&gt; <code>10.8.7</code>-&gt; <code>11.11.8</code>-&gt; <code>12.0.12</code>-&gt; <code>12.1.17</code>-&gt;<code>12.2.5</code></td>
<td align="left">需要五个中间版本：<code>9.5</code>、<code>10.8</code>、<code>11.11</code>、<code>12.0</code>、<code>12.1</code>、 然后<code>12.2.5</code>。</td>
</tr>
<tr>
<td align="left"><code>11.3.4</code></td>
<td align="left"><code>8.13.4</code></td>
<td align="left"><code>8.13.4</code>-&gt; <code>8.17.7</code>-&gt; <code>9.5.10</code>-&gt; <code>10.8.7</code>-&gt;<code>11.3.4</code></td>
<td align="left"><code>8.17.7</code>是第 8 版的最后一个版本，<code>9.5.10</code>是第 9 版的最后一个版本，<code>10.8.7</code>是第 10 版的最后一个版本。</td>
</tr>
</tbody></table>
<h1 id="升级"><a href="#升级" class="headerlink" title="升级"></a>升级</h1><p>我的版本为12.3.5，安装升级路线来看看，我要先升级到12.10.14</p>
<p><strong>编辑docker-compose.yml</strong></p>
<pre><code class="shell">services:
    gitlab:
      image: &#39;gitlab/gitlab-ce:12.10.14-ce.0&#39;
      restart: unless-stopped</code></pre>
<p><strong>升级</strong></p>
<pre><code class="go">docker-compose pull
docker-compose up -d</code></pre>
<p><strong>同理</strong></p>
<p>我升级到了12.10.14，接着要升级到13.0.14</p>
<p><strong>编辑docker-compose.yml</strong></p>
<pre><code class="shell">services:
    gitlab:
      image: &#39;gitlab/gitlab-ce:13.0.14-ce.0&#39;
      restart: unless-stopped</code></pre>
<p><strong>升级</strong></p>
<pre><code class="go">docker-compose pull
docker-compose up -d</code></pre>
<p><strong>就是这么升级下去的。。。。。。</strong></p>
